STANDARD DATA DICTIONARY #798.7 -- ROR LOG FILE                                                                                                                                                                                   JUN 17,2014@15:16:08  PAGE 1
STORED IN ^RORDATA(798.7,  (11 ENTRIES)   SITE: VXVISTA.ORG   UCI: VXVISTA,V13                                                                                                                                                                (VERSION 1.5)   

DATA          NAME                  GLOBAL        DATA
ELEMENT       TITLE                 LOCATION      TYPE
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
The ROR LOG file is used for recording different kinds of events (errors, debug messages, etc.) that are generated by registry processes.  
 
You may control event recording via parameters in the ROR REGISTRY PARAMETERS file. Look for additional information in the RORLOG and RORERR routines.  
 
A permanent screen (the ^DD(798.7,0,"SCR") node) restricts access to records of this file. Only users with the security key(s) for any defined registry (or those with the ROR VA IRM security key) can access records of the file.  
 
If you want the changes in the security keys allocation to have an effect immediately, you should rebuild the "ACL" cross-reference of the .01 field of the SECURITY KEY multiple of the ROR REGISTRY PARAMETERS file (#798.1). See the description of the
cross-reference for more details.  


FILE SCREEN (SCR-node) : I $$ACCESS^RORDD(798.7)
              DD ACCESS: @
              RD ACCESS: 
              WR ACCESS: @
             DEL ACCESS: @
           LAYGO ACCESS: @
           AUDIT ACCESS: 

POINTED TO BY: LOG field (#2.03) of the ROR TASK File (#798.8) 
               

CROSS
REFERENCED BY: START DATE/TIME(B), JOB NUMBER(C)

INDEXED BY:    REGISTRY (ARD)


798.7,.01     START DATE/TIME        0;1 DATE (Required)

              INPUT TRANSFORM:  S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
              LAST EDITED:      AUG 07, 2001 
              DESCRIPTION:      This field contains the date/time when this log was created.  
                                 
                                You can access records of this file only if you have appropriate security key(s) for any registry.  

              TECHNICAL DESCR:
                                The $$OPEN^RORLOG function populates this field automatically when a new log is created.  

              DELETE TEST:      1,0)= I $D(^RORDATA(798.7,"AREF",+$G(DA)))

                                UNEDITABLE
              CROSS-REFERENCE:  798.7^B 
                                1)= S ^RORDATA(798.7,"B",$E(X,1,30),DA)=""
                                2)= K ^RORDATA(798.7,"B",$E(X,1,30),DA)
                                3)= Do not delete!


798.7,1       ACTIVITY               0;3 SET

                                '0' FOR Other; 
                                '1' FOR Registry Update; 
                                '2' FOR Data Extraction; 
                                '3' FOR Acknowledgement; 
                                '4' FOR Hist. Extraction; 
                                '5' FOR Report; 
                                '6' FOR Access Violation; 
                                '7' FOR ROR TASK; 
                                '8' FOR Registry Setup; 
              LAST EDITED:      JUL 21, 2005 
              DESCRIPTION:
                                The value of this field indicates the activity performed by the process that created the log.  

              TECHNICAL DESCR:
                                This field is populated by the $$OPEN^RORLOG function with the value passed as one of the parameters.  


798.7,2       JOB NUMBER             0;4 NUMBER

              INPUT TRANSFORM:  K:+X'=X!(X>999999999999)!(X<1)!(X?.E1"."1N.N) X
              LAST EDITED:      AUG 13, 2001 
              HELP-PROMPT:      Enter a job number between 1 and 999999999999, 0 Decimal Digits. 
              DESCRIPTION:
                                Value of the JOB NUMBER field is the job number ($JOB) of the process that has created this log.  

              TECHNICAL DESCR:
                                This field is populated automatically by the $$OPEN^RORLOG function.  

              CROSS-REFERENCE:  798.7^C 
                                1)= S ^RORDATA(798.7,"C",$E(X,1,30),DA)=""
                                2)= K ^RORDATA(798.7,"C",$E(X,1,30),DA)
                                3)= Do not delete!
                                This cross-reference can be used in the troubleshooting process to find the log by the job number.  



798.7,3       REGISTRY               1;0 POINTER Multiple #798.73

              DESCRIPTION:      This multiple contains a list of the registries that were processed. Events recorded in the log are associated with these registries.  
                                 
                                Records of this multiple are indexed by the "ARD" index (whole file). So, it is possible to get a list of log files associated with the particular registry.  


798.73,.01      REGISTRY               0;1 POINTER TO ROR REGISTRY PARAMETERS FILE (#798.1) (Multiply asked)

                INPUT TRANSFORM:  S:$D(X) DINUM=X
                LAST EDITED:      SEP 06, 2001 
                DESCRIPTION:
                                  The value of this field is a pointer to a record of the ROR REGISTRY PARAMETERS file. The registry represented by that record was processed by the job that created this log.  

                NOTES:            XXXX--CAN'T BE ALTERED EXCEPT BY PROGRAMMER

                CROSS-REFERENCE:  798.73^B 
                                  1)= S ^RORDATA(798.7,DA(1),1,"B",$E(X,1,30),DA)=""
                                  2)= K ^RORDATA(798.7,DA(1),1,"B",$E(X,1,30),DA)
                                  3)= Do not delete!

                RECORD INDEXES:   ARD (#161) (WHOLE FILE #798.7)



798.7,4       MESSAGE                2;0 DATE Multiple #798.74

              DESCRIPTION:
                                This multiple contains all messages recorded in the log.  

              TECHNICAL DESCR:
                                Every call of the LOG^RORLOG procedure adds a new record to this multiple. The $$OPEN^RORLOG and CLOSE^RORLOG entry points can also call the LOG^RORLOG automatically to add a header and footer to the log.  


798.74,.01      DATE/TIME              0;1 DATE (Multiply asked)

                INPUT TRANSFORM:  S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
                LAST EDITED:      AUG 07, 2001 
                DESCRIPTION:
                                  This field contains the date/time of the recorded event.  

                TECHNICAL DESCR:
                                  The field is populated automatically by the LOG^RORLOG procedure with the current date and time.  

                CROSS-REFERENCE:  798.74^B 
                                  1)= S ^RORDATA(798.7,DA(1),2,"B",$E(X,1,30),DA)=""
                                  2)= K ^RORDATA(798.7,DA(1),2,"B",$E(X,1,30),DA)
                                  3)= Do not delete!


798.74,1        TYPE                   0;2 SET (Required)

                                  '1' FOR Debug; 
                                  '2' FOR Information; 
                                  '3' FOR Data Quality; 
                                  '4' FOR Warning; 
                                  '5' FOR Database Error; 
                                  '6' FOR Error; 
                LAST EDITED:      AUG 07, 2001 
                DESCRIPTION:      The value of this field indicates the type of the recorded event.  
                                   
                                  You can control which events are recorded and which are not via the LOG EVENT multiple of the ROR REGISTRY PARAMETERS file.  


798.74,2        MESSAGE                2;E1,245 FREE TEXT (Required)

                INPUT TRANSFORM:  K:$L(X)>70!($L(X)<1) X
                LAST EDITED:      NOV 09, 2001 
                HELP-PROMPT:      Answer must be 1-70 characters in length. 
                DESCRIPTION:
                                  This field contains a text message describing the recorded event.  


798.74,3        PATIENT                0;4 POINTER TO PATIENT FILE (#2)

                LAST EDITED:      AUG 07, 2001 
                DESCRIPTION:
                                  If the recorded event can be associated with a particular patient, this field contains a pointer to the patient record in the PATIENT file (DFN).  


798.74,4        ADDITIONAL INFO        1;0   WORD-PROCESSING #798.744   (NOWRAP)

                DESCRIPTION:
                                  This field contains any additional information describing the event.  




798.7,5       END DATE/TIME          0;2 DATE

              INPUT TRANSFORM:  S %DT="ESTX" D ^%DT S X=Y K:Y<1 X
              LAST EDITED:      AUG 07, 2001 
              DESCRIPTION:
                                This field contains the date/time when the log was closed.  

              TECHNICAL DESCR:
                                The CLOSE^RORLOG procedure populates this field automatically when the log is closed.  


798.7,6.01    PROCESSED PATIENTS     0;5 NUMBER

              INPUT TRANSFORM:  K:+X'=X!(X>999999999999)!(X<0)!(X?.E1"."1N.N) X
              LAST EDITED:      AUG 07, 2001 
              HELP-PROMPT:      Type a Number between 0 and 999999999999, 0 Decimal Digits. 
              DESCRIPTION:
                                The value of this field indicates the number of processed patients.  

              TECHNICAL DESCR:
                                The value of this field is also duplicated in the last message of the log (footer).  


798.7,6.02    PATIENTS WITH ERRORS   0;6 NUMBER

              INPUT TRANSFORM:  K:+X'=X!(X>999999999999)!(X<0)!(X?.E1"."1N.N) X
              LAST EDITED:      AUG 07, 2001 
              HELP-PROMPT:      Type a Number between 0 and 999999999999, 0 Decimal Digits. 
              DESCRIPTION:
                                The value of this field indicates the number of patients processed with errors.  

              TECHNICAL DESCR:
                                The value of this field is also duplicated in the last message of the log (footer).  


798.7,6.03    RATE                   0;7 NUMBER

              INPUT TRANSFORM:  K:+X'=X!(X>999999999999)!(X<0)!(X?.E1"."4N.N) X
              LAST EDITED:      AUG 07, 2001 
              HELP-PROMPT:      Type a Number between 0 and 999999999999, 3 Decimal Digits. 
              DESCRIPTION:
                                The value of this field indicates the rate of patient processing (patients per second).  

              TECHNICAL DESCR:
                                The value of this field is also duplicated in the last message of the log (footer).  


798.7,7       USER                   0;8 POINTER TO NEW PERSON FILE (#200)

              LAST EDITED:      FEB 03, 2003 
              DESCRIPTION:
                                The USER field points to the VistA user associated with the log (its internal value is the DUZ at the moment when the log was created).  

                                UNEDITABLE

798.7,8       TASK NUMBER            0;9 NUMBER

              INPUT TRANSFORM:  K:+X'=X!(X>9899999999)!(X<1)!(X?.E1"."1N.N) X
              LAST EDITED:      NOV 04, 2005 
              HELP-PROMPT:      Enter a task number between 1 and 9899999999, 0 Decimal Digits. 
              DESCRIPTION:
                                This field stores the number of the task that created the log. If the log is created from a foreground job, this field will be empty.  



      FILES POINTED TO                      FIELDS

NEW PERSON (#200)                 USER (#7)

PATIENT (#2)                      MESSAGE:PATIENT (#3)

ROR REGISTRY PARAMETERS (#798.1)  REGISTRY:REGISTRY (#.01)


Subfile #798.73

  Record Indexes:

  ARD (#161)    RECORD    REGULAR    IR    SORTING ONLY    WHOLE FILE (#798.7)
      Short Descr:  Registry & Start date
      Description:  This index can be used to get a chronological list of logs associated with a particular registry.  
        Set Logic:  S ^RORDATA(798.7,"ARD",X(1),X(2),DA(1),DA)=""
       Kill Logic:  K ^RORDATA(798.7,"ARD",X(1),X(2),DA(1),DA)
       Whole Kill:  K ^RORDATA(798.7,"ARD")
             X(1):  REGISTRY  (798.73,.01)  (Subscr 1)  (forwards)
             X(2):  Computed Code: S X=$P($G(^RORDATA(798.7,DA(1),0)),U)
                      (Subscr 2)


INPUT TEMPLATE(S):

PRINT TEMPLATE(S):
ROR LOG                       JUN 08, 2004@14:08  USER #0                                                                                                                                                                      CLINICAL REGISTRIES LOG FILE(S)
     This template is used by the [RORMNT PRINT LOGS] option to print 
     messages from the log files.

SORT TEMPLATE(S):
ROR LOG                       NOV 02, 2001@12:04  USER #0                                                                                                                                                                 'ROR LOG' Print Template always used
SORT BY: @NUMBER// (NUMBER not null)
  WITHIN NUMBER, SORT BY: START DATE/TIME;S1;"LOG DATE/TIME: "//    (User is asked range)
    WITHIN START DATE/TIME, SORT BY: MESSAGE//
    MESSAGE SUB-FIELD: DATE/TIME// (DATE/TIME not null)
     This template is used by the [RORMNT PRINT LOGS] option to print 
     messages from the log files.


FORM(S)/BLOCK(S):