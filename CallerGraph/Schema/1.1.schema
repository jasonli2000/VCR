STANDARD DATA DICTIONARY #1.1 -- AUDIT FILE                                                                                                                                                                                       JUN 17,2014@15:27:22  PAGE 1
STORED IN ^DIA(   SITE: VXVISTA.ORG   UCI: VXVISTA,V13                                                                                                                                                                                       (VERSION 22.0)   

DATA          NAME                  GLOBAL        DATA
ELEMENT       TITLE                 LOCATION      TYPE
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
This file stores an audit trail of changes made to data fields.  


              DD ACCESS: ^
              WR ACCESS: ^
             DEL ACCESS: ^
           LAYGO ACCESS: ^
IDENTIFIED BY: 
      "WRITE": N % S %=$P(^(0),U,2) D EN^DDIOL("   "_$E(%,4,5)_"-"_$E(%,6,7)_"-"_$E(%,2,3)_"@"_$E($P(%_"0000",".",2),1,4),"","?0")

CROSS
REFERENCED BY: INTERNAL ENTRY NUMBER(B), DATE/TIME RECORDED(C), USER(D)

1.1,.001      NUMBER                     NUMBER

              INPUT TRANSFORM:  K:+X'=X!(X<1)!(X?.E1"."1N.N) X
              HELP-PROMPT:      A whole number greater than 1. 

1.1,.01       INTERNAL ENTRY NUMBER  0;1 FREE TEXT (Required)

              The Internal Number of the Entry that has been audited.                                                          
              INPUT TRANSFORM:  K:X[""""!($A(X)=45) X I $D(X) K:$L(X)>16!($L(X)<1)!'(X'?1P.E) X
              CROSS-REFERENCE:  1.1^B 
                                1)= S ^DIA(DIA,"B",$E(X,1,30),DA)=""
                                2)= K ^DIA(DIA,"B",$E(X,1,30),DA)


1.1,.02       DATE/TIME RECORDED     0;2 DATE (Required)

              INPUT TRANSFORM:  S %DT="ETXR" D ^%DT S X=Y K:Y<1 X
              CROSS-REFERENCE:  1.1^C 
                                1)= S ^DIA(DIA,"C",$E(X,1,30),DA)=""
                                2)= K ^DIA(DIA,"C",$E(X,1,30),DA)


1.1,.03       FIELD NUMBER           0;3 FREE TEXT (Required)

              INPUT TRANSFORM:  K:$L(X)>10!$L(X)<1) X
              HELP-PROMPT:      The number of the field that was audited. 

1.1,.04       USER                   0;4 POINTER TO NEW PERSON FILE (#200) (Required)

              CROSS-REFERENCE:  1.1^D 
                                1)= S ^DIA(DIA,"D",$E(X,1,30),DA)=""
                                2)= K ^DIA(DIA,"D",$E(X,1,30),DA)


1.1,.05       RECORD ADDED           0;5 SET

                                'A' FOR Added Record; 
              DESCRIPTION:
                                When a new recorded is added to a file (sub-file) and the .01 field is being audited, then this field will be set to an 'A'.  


1.1,.06       ACCESSED               0;6 SET

                                'i' FOR INQUIRED TO ENTRY; 
              DESCRIPTION:
                                This flag (settable by ACCESSED^DIET) is designed to record that a user LOOKED UP the Entry, without necessarily changing it.  Such an audit might be set by the POST-SELECTION ACTION of a File, e.g. for HIPAA.  


1.1,1         ENTRY NAME              ;  COMPUTED

              MUMPS CODE:       S %=^DIC(DIA,0,"GL"),X=^DIA(DIA,D0,0),X=$S($D(@(%_+X_",0)")):$P(^(0),U,1),1:""),C=$S($D(^DD(DIA,.01,0)):$P(^(0),U,2),1:""),Y=X D:Y]"" Y^DIQ:C]"" S X=Y,C=","

1.1,1.1       FIELD NAME              ;  COMPUTED

              MUMPS CODE:       S Y(1.1,1.1)=$S($D(^DIA(DIA,D0,0)):$P(^(0),U,3),1:"") X ^DD(1.1,1.1,9.2) K Y(1.1) S X=$E(X,1,$L(X)-1)
                                9.2 = X ^DD(1.1,1.1,9.3) S X="" F %=1:1:%-1 S X=X_Y(1.1,%)_","
                                9.3 = S X1=DIA F %=1:1 S X=$P(Y(1.1,1.1),",",%) Q:X=""  S Y(1.1,%)=$S($D(^DD(X1,X,0)):$P(^(0),U,1,2),1:"????"),X1=+$P(Y(1.1,%),U,2),Y(1.1,%)=$P(Y(1.1,%),U,1)
              NOTES:            XXXX--CAN'T BE ALTERED EXCEPT BY PROGRAMMER


1.1,2         OLD VALUE               ;  COMPUTED

              MUMPS CODE:       S X=$S($D(^DIA(DIA,D0,2)):^(2),1:"<no previous value>")

1.1,2.1       OLD INTERNAL VALUE     2.1;1 FREE TEXT

              INPUT TRANSFORM:  K:$L(X)>30 X

1.1,2.2       DATATYPE OF OLD VALUE  2.1;2 SET

                                'S' FOR SET; 
                                'P' FOR POINTER; 
                                'V' FOR VARIABLE POINTER; 

1.1,3         NEW VALUE               ;  COMPUTED

              MUMPS CODE:       S X=$S($D(^DIA(DIA,D0,3)):^(3),1:"<deleted>")

1.1,3.1       NEW INTERNAL VALUE     3.1;1 FREE TEXT

              INPUT TRANSFORM:  K:$L(X)>30 X

1.1,3.2       DATATYPE OF NEW VALUE  3.1;2 SET

                                'S' FOR SET; 
                                'P' FOR POINTER; 
                                'V' FOR VARIABLE POINTER; 

1.1,4.1       MENU OPTION USED       4.1;1 POINTER TO OPTION FILE (#19)

              DESCRIPTION:
                                This is the Option that the Kernel menu system used to change the audited data.  

              TECHNICAL DESCR:
                                This field contains the value of +XQY and is a direct pointer to the OPTION FILE (#19).  


1.1,4.2       PROTOCOL or OPTION USED 4.1;2       VARIABLE POINTER

              FILE  ORDER  PREFIX    LAYGO  MESSAGE
                 19   1    O            n   What Option was used? 
                 101  2    P            n   What Protocol was used? 
                                         
              HELP-PROMPT:      Answer must be 1-63 characters in length. 
              DESCRIPTION:
                                This is the Protocol or Option (type Protocol) that was used when the audit took place.  

              TECHNICAL DESCR:
                                This is a Variable Pointer field who's value is obtain from the local variable XQORNOD, which is in the form ien;global root.  It can either point to the Option file or to the Protocol file.  



      FILES POINTED TO                      FIELDS

NEW PERSON (#200)                 USER (#.04)

OPTION (#19)                      MENU OPTION USED (#4.1)
                                  PROTOCOL or OPTION USED (#4.2)

PROTOCOL (#101)                   PROTOCOL or OPTION USED (#4.2)



INPUT TEMPLATE(S):

PRINT TEMPLATE(S):
CAPTIONED                                         USER #0    
XUSEC TERMINATION REPORT      APR 23, 2004@10:56  USER #0                                                                                                                                                                  New Person Termination Audit Report
XUSEC UPARROW TERM REPORT     APR 23, 2004@07:36  USER #0                                                                                                                                                                                                    @

SORT TEMPLATE(S):
XUSEC TERMINATION REPORT      APR 22, 2004@08:08  USER #0    
SORT BY: @ENTRY NAME// (ENTRY NAME not null)
  WITHIN ENTRY NAME, SORT BY: @FIELD NUMBER// (FIELD NUMBER equals 9.2)
    WITHIN FIELD NUMBER, SORT BY: @DATE/TIME RECORDED//    (User is asked range)

XUSEC TERMINATION REPORT Q    AUG 09, 2004@13:25  USER #0    
SORT BY: @ENTRY NAME// (ENTRY NAME not null)
  WITHIN ENTRY NAME, SORT BY: @FIELD NUMBER// (FIELD NUMBER equals 9.2)
    WITHIN FIELD NUMBER, SORT BY: ((DATE(#.02)>(TODAY-9))&(DATE(#.02)<TODAY));L1// (((DATE(#.02)>(TODAY-9))&(DATE(#.02)<TODAY)))
     This template is used for the queued termation option:
      XUSEC ISO Q TERMINATION REPORT


FORM(S)/BLOCK(S):