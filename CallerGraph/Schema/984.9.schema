STANDARD DATA DICTIONARY #984.9 -- MPIF CMOR REQUEST FILE                                                                                                                                                                          APR 3,2014@10:29:16  PAGE 1
STORED IN ^MPIF(984.9,  *** NO DATA STORED YET ***   SITE: PLA.ISC-WASH.DOMAIN.EXT   UCI: VISTA,PLA                                                                                                                                           (VERSION 1.0)   

DATA          NAME                  GLOBAL        DATA
ELEMENT       TITLE                 LOCATION      TYPE
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
This file holds all requests for change a patient's CIRN Master of Record.  Requests being sent to remote locations and received from remote locations are stored in this file and updated.  


              DD ACCESS: @
              RD ACCESS: @
              WR ACCESS: @
             DEL ACCESS: @
           LAYGO ACCESS: @
           AUDIT ACCESS: @
IDENTIFIED BY: 
        "WR1": W "   ",$E($P(^(0),U,3),4,5)_"-"_$E($P(^(0),U,3),6,7)_"-"_$E($P(^(0),U,3),2,3)
        "WR2": W "   ",@("$P($P($C(59)_$S($D(^DD(991,.06,0)):$P(^(0),U,3),1:0)_$E("_DIC_"Y,0),0),$C(59)_$P(^(0),U,6)_"":"",2),$C(59),1)")
        "WR3": S %I=Y,Y=$S('$D(^(0)):"",$D(^DPT(+$P(^(0),U,4),0))#2:$P(^(0),U,1),1:""),C=$P(^DD(2,.01,0),U,2) D Y^DIQ:Y]"" W "   ",Y,@("$E("_DIC_"%I,0),0)") S Y=%I K %I

CROSS
REFERENCED BY: STATUS(AC), REQUESTED BY(AD), REVIEWED BY(AE), STATUS(AS1), SITE(AS2), REQUEST NUMBER(B), PATIENT(C)

984.9,.01     REQUEST NUMBER         0;1 FREE TEXT (Required)

              INPUT TRANSFORM:  K:$L(X)>20!($L(X)<3) X
              LAST EDITED:      JUL 12, 1996 
              HELP-PROMPT:      Answer must be 3-20 characters in length. 
              DESCRIPTION:
                                Request number is automatically generated by the system and is used to identify a specific CMOR request.  When a request is transmitted to another station, the request number remains the same across both stations.  

              CROSS-REFERENCE:  984.9^B 
                                1)= S ^MPIF(984.9,"B",$E(X,1,30),DA)=""
                                2)= K ^MPIF(984.9,"B",$E(X,1,30),DA)


984.9,.02     REQUESTED BY           0;2 POINTER TO NEW PERSON FILE (#200) (Required)

              LAST EDITED:      OCT 31, 2001 
              HELP-PROMPT:      Select the person making the request from the New Person file. 
              DESCRIPTION:      The REQUESTED BY field will exist at the originating station only.  Once the request is transmitted to another station, the receiving station will not have data in this field.  This is due to the fact that the receiving
                                location will not have the originating person in their New Person (#200) file.  

              CROSS-REFERENCE:  984.9^AD 
                                1)= S ^MPIF(984.9,"AD",$E(X,1,30),DA)=""
                                2)= K ^MPIF(984.9,"AD",$E(X,1,30),DA)


984.9,.03     DATE REQUESTED         0;3 DATE (Required)

              INPUT TRANSFORM:  S %DT="EX" D ^%DT S X=Y K:Y<1 X
              LAST EDITED:      JUL 02, 1996 
              HELP-PROMPT:      Enter the date/time of the request. 
              DESCRIPTION:
                                Date requested is the date the request was entered into the system.  


984.9,.04     PATIENT                0;4 POINTER TO PATIENT FILE (#2)

              LAST EDITED:      OCT 06, 1997 
              HELP-PROMPT:      Select the patient that the CMOR request is for. 
              DESCRIPTION:
                                Patient affected by the CMOR change request.  

              CROSS-REFERENCE:  984.9^C 
                                1)= S ^MPIF(984.9,"C",$E(X,1,30),DA)=""
                                2)= K ^MPIF(984.9,"C",$E(X,1,30),DA)


984.9,.05     REQUESTOR PHONE NUMBER 0;5 FREE TEXT (Required)

              INPUT TRANSFORM:  K:$L(X)>20!($L(X)<4) X
              LAST EDITED:      JUL 03, 1996 
              HELP-PROMPT:      Answer must be 4-20 characters in length. 
              DESCRIPTION:
                                Phone number that can be used to contact the person requesting the CMOR change request.  This data is transmitted to the receiving location and is needed if the person reviewing the request has questions.  


984.9,.06     STATUS                 0;6 SET (Required)

                                '1' FOR OPEN; 
                                '2' FOR REQUESTED; 
                                '3' FOR PENDING APPROVAL; 
                                '4' FOR APPROVED; 
                                '5' FOR DISAPPROVED; 
              LAST EDITED:      JUL 09, 2001 
              DESCRIPTION:      This field tracks the progress of the CMOR change request.  As the request is being entered, it has a status of Open.  Once the requestor sends the request, the status is change to Requested.  At the receiving location,
                                the status is set to Pending Approval.  Once it is processed, it will be set to Approved or Disapproved.  The requesting site will also update the status to Approved or Disapproved once the request has been processed.  

              CROSS-REFERENCE:  984.9^AC 
                                1)= S ^MPIF(984.9,"AC",$E(X,1,30),DA)=""
                                2)= K ^MPIF(984.9,"AC",$E(X,1,30),DA)

              CROSS-REFERENCE:  984.9^AS1^MUMPS 
                                1)= S:$P(^MPIF(984.9,DA,0),"^",7)]"" ^MPIF(984.9,"AS",$P(^(0),"^",7),X,DA)=""
                                2)= K:$P(^MPIF(984.9,DA,0),"^",7)]"" ^MPIF(984.9,"AS",$P(^(0),"^",7),X,DA)
                                Compound x-ref on site and status.  



984.9,.07     SITE                   0;7 POINTER TO INSTITUTION FILE (#4)

              LAST EDITED:      JUL 09, 2001 
              DESCRIPTION:
                                At the site that has RECEIVED the Request/Push the site field will be the site that initiated the Request/Push.  At the site that has SENT the request it will be the site the request was sent to.  

              CROSS-REFERENCE:  984.9^AS2^MUMPS 
                                1)= S:$P(^MPIF(984.9,DA,0),"^",6)]"" ^MPIF(984.9,"AS",X,$P(^(0),"^",6),DA)=""
                                2)= K:$P(^MPIF(984.9,DA,0),"^",6)]"" ^MPIF(984.9,"AS",X,$P(^(0),"^",6),DA)
                                Compound x-ref on site and status 



984.9,.08     TYPE OF MESSAGE        0;8 SET (Required)

                                '1' FOR RECEIVED; 
                                '2' FOR SENT; 
              LAST EDITED:      JUL 24, 1996 
              DESCRIPTION:
                                A type of sent refers to the CMOR request originated from the station and is being sent to another station.  A received type refers to the CMOR request originated from the other station.  


984.9,.09     CMOR AFTER APPROVAL    0;9 POINTER TO INSTITUTION FILE (#4)

              LAST EDITED:      JUN 18, 2001 
              DESCRIPTION:
                                This field will contain the site that the request is asking to be the CMOR or the site that the Push is making the CMOR.  


984.9,1.01    REQUESTOR NAME         1;1 FREE TEXT

              INPUT TRANSFORM:  K:$L(X)>30!($L(X)<3) X
              LAST EDITED:      JUL 02, 1996 
              HELP-PROMPT:      Answer must be 3-30 characters in length. 
              DESCRIPTION:
                                The requestor name is a free-text name of the person sending the CMOR request.  This field is blank at the originating site since the Request By field points to the person.  This field is used at the receiving location.  


984.9,1.02    REASON FOR REQUEST     1;2 FREE TEXT (Required)

              INPUT TRANSFORM:  K:$L(X)>60!($L(X)<3) X
              LAST EDITED:      JUL 11, 1996 
              HELP-PROMPT:      Answer must be 3-60 characters in length. 
              DESCRIPTION:
                                Enter a brief reason for requesting the CMOR transfer.  


984.9,1.03    TYPE OF ACTION         1;3 SET (Required)

                                '1' FOR REQUEST SENT TO; 
                                '2' FOR REQUEST RECEIVED FROM; 
                                '3' FOR PUSH SENT TO; 
                                '4' FOR PUSH RECEIVED FROM; 
              LAST EDITED:      JUN 18, 2001 
              DESCRIPTION:
                                This field is used to show which request was made and whether it originated at this facility or was received at this facility.  


984.9,2.01    REVIEWED BY            2;1 POINTER TO NEW PERSON FILE (#200)

              LAST EDITED:      JUN 13, 2001 
              HELP-PROMPT:      Select the user making the request. 
              DESCRIPTION:      The site processing this request will have this field populated with the user that processed the request.  The site that made the request will not have this field populated but will instead have the Reviewer Name field 
                                populated.  

              CROSS-REFERENCE:  984.9^AE 
                                1)= S ^MPIF(984.9,"AE",$E(X,1,30),DA)=""
                                2)= K ^MPIF(984.9,"AE",$E(X,1,30),DA)


984.9,2.02    DATE REVIEWED          2;2 DATE

              INPUT TRANSFORM:  S %DT="EX" D ^%DT S X=Y K:Y<1 X
              LAST EDITED:      JUL 02, 1996 
              HELP-PROMPT:      Enter the date the request was approved/denied. 
              DESCRIPTION:
                                This date reflects the date the request was approved or denied.  


984.9,2.03    REVIEWER PHONE NUMBER  2;3 FREE TEXT

              INPUT TRANSFORM:  K:$L(X)>20!($L(X)<4) X
              LAST EDITED:      JUL 02, 1996 
              HELP-PROMPT:      Answer must be 4-20 characters in length. 
              DESCRIPTION:      Phone number that is used to contact the person that reviewed and approved or denied the CMOR change request.  This data is transmitted to the requesting station and is needed if the person receiving the result has
                                questions.  


984.9,3.01    REVIEWER NAME          3;1 FREE TEXT

              INPUT TRANSFORM:  K:$L(X)>30!($L(X)<3) X
              LAST EDITED:      JUN 13, 2001 
              HELP-PROMPT:      Answer must be 3-30 characters in length. 
              DESCRIPTION:      The reviewer name is a free-text name of the person reviewing the CMOR request.  This field is blank at the reviewing site since the Reviewed By field points to the person.  This field is used at the originating station
                                and is transmitted along with the result of the request.  


984.9,3.02    REVIEWER COMMENTS      3;2 FREE TEXT

              INPUT TRANSFORM:  K:$L(X)>60!($L(X)<3) X
              LAST EDITED:      JUL 02, 1996 
              HELP-PROMPT:      Answer must be 3-60 characters in length. 
              DESCRIPTION:
                                Comments that are entered by the person reviewing the request.  These comments are transmitted back to the origination station after the request is approved or denied.  


984.9,100     DAYS OLD                ;  COMPUTED

              MUMPS CODE:       S X=0 I $P(^MPIF(984.9,D0,0),"^",3)]"" S X=$$FMDIFF^XLFDT($S($P($G(^MPIF(984.9,D0,2)),"^",2)]"":$P(^(2),"^",2),1:DT),$P(^MPIF(984.9,D0,0),"^",3)) S X=$J(X,0,0)
              ALGORITHM:        S X=0 I $P(^MPIF(984.9,D0,0),"^",3)]"" S X=$$FMDIFF^XLFDT($S($P($G(^MPIF(984.9,D0,2)),"^",2)]"":$P(^(2),"^",2),1:DT),$P(^MPIF(984.9,D0,0),"^",3))  (ALWAYS 0 DECIMAL DIGITS)
              LAST EDITED:      JUL 15, 1996 
              DESCRIPTION:
                                Days old is calculated by comparing the date the request was entered or received and compared to today's date.  The number of days between these two dates determines the number of days old a request is.  


984.9,101     REQUESTOR               ;  COMPUTED

              MUMPS CODE:       S X=$P($G(^VA(200,+$P(^MPIF(984.9,D0,0),"^",2),0)),"^") S:X="" X=$P($G(^MPIF(984.9,D0,1)),"^") S X=$E(X,1,30)
              ALGORITHM:        S X=$P($G(^VA(200,+$P(^MPIF(984.9,D0,0),"^",2),0)),"^") S:X="" X=$P($G(^MPIF(984.9,D0,1)),"^") S X=$E(X,1,30)
              LAST EDITED:      JUL 16, 1996 
              DESCRIPTION:      The result of this computed field is the comparison of the Request By and the Requestor Name field.  Since only one of these two fields exist within a CMOR request, this computed field extracts the one that exists and
                                gives a consistent place to use in print templates for displaying the name 


984.9,102     REVIEWER                ;  COMPUTED

              MUMPS CODE:       S X=$P($G(^VA(200,+$P($G(^MPIF(984.9,D0,2)),"^"),0)),"^") S:X="" X=$P($G(^MPIF(984.9,D0,3)),"^") S X=$E(X,1,30)
              ALGORITHM:        S X=$P($G(^VA(200,+$P($G(^MPIF(984.9,D0,2)),"^"),0)),"^") S:X="" X=$P($G(^MPIF(984.9,D0,3)),"^") S X=$E(X,1,30)
              LAST EDITED:      JUL 16, 1996 
              DESCRIPTION:      The result of this computed field is the comparison of the Reviewed By and the Reviewer Name field.  Since only on of these two fields exist within a CMOR request, this computed field extracts the one that exists and gives 
                                a consistent place to use in print templates for displaying the name 



      FILES POINTED TO                      FIELDS

INSTITUTION (#4)                  SITE (#.07)
                                  CMOR AFTER APPROVAL (#.09)

NEW PERSON (#200)                 REQUESTED BY (#.02)
                                  REVIEWED BY (#2.01)

PATIENT (#2)                      PATIENT (#.04)



INPUT TEMPLATE(S):
MPIF OPEN REQUEST             JUL 18, 1996@15:36  USER #0    
MPIF REQUEST INCOMING         JUL 18, 2001@04:37  USER #0    
MPIF RESULT INCOMING          JUN 14, 2000@07:31  USER #0    
MPIF REVIEW AUTO              JUL 23, 1996@09:50  USER #0    
MPIF REVIEW RESET             JUL 22, 1996@09:11  USER #0    
MPIF REVIEW RESULT            JUL 22, 1996@09:07  USER #0    

PRINT TEMPLATE(S):
MPIF OUTSTANDING REQUESTS     OCT 06, 1997@11:22  USER #0                                                                                                                                                                                Pending CMOR Requests
MPIF REQUEST VIEW             FEB 04, 1998@14:26  USER #0                                                                                                                                                                                                    @

SORT TEMPLATE(S):
MPIF PENDING REQUESTS         NOV 01, 1996@11:39  USER #0    
SORT BY: @STATUS// (STATUS equals 3 (PENDING APPROVAL))
  WITHIN STATUS, SORT BY: SITE;"Request From: "// (SITE not null)

MPIF REQUEST SORT             OCT 06, 1997@11:38  USER #0    
SORT BY: $E(#.07,1,15)_" ("_(#.07:#99)_")";"STATION: "// ($E(#.07,1,15)_"" (""_(#.07:#99)_"")"" not null)
  WITHIN $E(#.07,1,15)_" ("_(#.07:#99)_")", SORT BY: DATE REQUESTED// (DATE REQUESTED not null)
    WITHIN DATE REQUESTED, SORT BY: @INTERNAL(#.06)//    (User is asked range)
      WITHIN INTERNAL(#.06), SORT BY: @INTERNAL(#.02)//    (User is asked range)
        WITHIN INTERNAL(#.02), SORT BY: @DAYS OLD//    (User is asked range)


FORM(S)/BLOCK(S):